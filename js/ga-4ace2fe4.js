if(!this.GA_delay_logging){this.GA_delay_logging=0}if(!this.GA_additional_codes){this.GA_additional_codes={}}if(!this.GA_url_prefix){this.GA_url_prefix=false}if(!this.GA_setvar){this.GA_setvar={}}var GA_obj=function(){var J=new Object();var D={uacode:false,pageTracker:false,eventTracker:[]};var L=location.hostname;if(L.length-L.lastIndexOf(".pbs.org")==8){L=".pbs.org"}var E=location.pathname;if(GA_url_prefix){E=GA_url_prefix+location.pathname}if(location.search){E=E+location.search}var K=function(R){var Q=_gat._getTracker("UA-1-1");Q._setDomainName(L);Q._setAllowHash(false);Q._setAllowLinker(true);if(!R){R={localized:0}}var P=["localized","station"];var M="";for(var O=0;O<P.length;O++){if(R[P[O]]!=undefined){M=M+"/"+P[O]+"="+R[P[O]]}}for(var N in GA_setvar){if(GA_setvar[N]!=undefined){M=M+"/"+N+"="+GA_setvar[N]}}Q._setVar(M)};var A=function(N){var M=_gat._getTracker(N);M._setDomainName(L);M._setAllowHash(false);M._setAllowLinker(true);M._trackPageview(E);return M};var I=function(Q,R){if(!R){if(typeof GA_env=="string"){R={ua_list:GA_env,oldFormat:1};var S=document.cookie;var T=S.indexOf("pbsol.station=");if(T!=-1){R.vars={localized:1,station:S.substr(T+14,4)}}}else{R=GA_env}}K(R.vars);var P=["r","s","pr","pm"];var N=R.ua_list.split(",");for(var O=0;O<N.length;O++){var S=N[O];if(S.substring(0,3)=="UA-"){J[P.shift()]=A(S)}else{if(S.substring(0,3)=="ET-"){D.uacode=S.replace(/^ET-/,"UA-");D.pageTracker=A(D.uacode)}}}for(var U in GA_additional_codes){if(!J[U]){var M=A(GA_additional_codes[U]);J[U]=M}}if(R.oldFormat){J.r._trackEvent("Debug","Old GA_env",document.location.pathname)}B()};var B=function(){if(document.getElementsByTagName){var R=document.getElementsByTagName("a");for(var O=0;O<R.length;O++){var M=R[O];if(M.href==""){continue}if(M.href.match(/^javascript:/i)){continue}var N=M.hostname;if(N=="pbs.org"){N="www.pbs.org"}if(N=="www.pbskids.org"){N="pbskids.org"}var P=location.hostname;if(P=="dipsy.pbs.org"&&N=="www.pbs.org"){continue}if(P=="soup.pbskids.org"&&N=="pbskids.org"){continue}if(N==P){var Q=M.pathname;if(Q.match(/\.(doc|xls|exe|zip|pdf|mov|mp3)$/)){G(M,"click",H)}}else{if(N){G(M,"click",F)}}}}};var G=function(N,O,M){if(N.addEventListener){N.addEventListener(O,M,false)}else{if(N.attachEvent){N.attachEvent("on"+O,M)}}};var H=function(N){var M=N?N.target.pathname:"/"+window.event.srcElement.pathname;if(M){C("Links","Download",M)}return true};var F=function(O){var M;var N=O.srcElement;if(N&&N.hostname){M=N.hostname+"/"+N.pathname+N.search}else{if(this.hostname){M=this.hostname+this.pathname+this.search}}if(M){C("Links","External",M)}return true};var C=function(N,P,M,O){if(!D.uacode){return false}D.pageTracker._trackEvent(N,P,M,O)};if(!GA_delay_logging&&GA_env){G(window,"load",I)}return{ga_url:E,_getTracker:function(M){if(J[M]){return J[M]}else{if(M.match(/^UA-\d+-\d+$/)){return _gat._getTracker(M)}else{return false}}},_runInit:function(){I()},trackEvent:function(P,O,M,N){C(P,O,M,N)}}}();
